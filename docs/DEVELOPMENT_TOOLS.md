# üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ BikeCalc Pro

## üìã –û–±–∑–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

BikeCalc Pro –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

## üîç –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏ - LeakCanary

### üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

**[LeakCanary](https://square.github.io/leakcanary/)** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏ –≤ Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

### ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```toml
# gradle/libs.versions.toml
leakcanary = "2.14"
leakcanary-android = { module = "com.squareup.leakcanary:leakcanary-android", version.ref = "leakcanary" }
```

```kotlin
// composeApp/build.gradle.kts
dependencies {
    debugImplementation(libs.leakcanary.android)
}
```

### üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫** - —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ debug —Å–±–æ—Ä–∫–∞—Ö –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç Activity, Fragment, ViewModel, Service
3. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ —É—Ç–µ—á–µ–∫
4. **–î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã** - –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É –æ–±—ä–µ–∫—Ç–æ–≤

### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ä—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **Android**: Activity, Fragment, Service, BroadcastReceiver
- **Compose**: ViewModel, CompositionLocal, State –æ–±—ä–µ–∫—Ç—ã  
- **Koin**: Singleton –∏ Scoped –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **Coroutines**: Job, Flow, StateFlow –∫–æ–ª–ª–µ–∫—Ç–æ—Ä—ã

### üîß –ö–æ–º–∞–Ω–¥—ã

```bash
# –°–±–æ—Ä–∫–∞ —Å LeakCanary
./gradlew :composeApp:assembleDebug

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ debug –≤–µ—Ä—Å–∏–∏
./gradlew :composeApp:installDebug

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ LeakCanary
adb logcat | grep LeakCanary
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ - Kotzilla

### üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

**[Kotzilla](https://kotzilla.io/)** –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ Koin DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ –æ–±—â–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### ‚öôÔ∏è –§—É–Ω–∫—Ü–∏–∏

- **üìà –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** –≤ IDE
- **üöÄ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–ø—É—Å–∫–∞** –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **üîç –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**
- **üì± –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ**

### üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: [Kotzilla.md](./KOTZILLA.md)

## üîç –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ - Detekt

### üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

**[Detekt](https://detekt.dev/)** –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ Kotlin –∫–æ–¥–∞ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º.

### üîß –ö–æ–º–∞–Ω–¥—ã

```bash
# –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞
./gradlew detekt

# –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á–µ—Ç–æ–≤
open build/reports/detekt/detekt.html

# –ê–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ)
./gradlew detektBaseline
```

### ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- **–§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**: `detekt.yml`
- **–ü—Ä–∞–≤–∏–ª–∞**: Code smell detection, complexity analysis, formatting
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: CI/CD pipeline, IDE plugin

## üèóÔ∏è –°–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∫–∏ - Gradle

### üì¶ Version Catalogs

**[Gradle Version Catalogs](https://docs.gradle.org/current/userguide/platforms.html)** –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏.

#### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```toml
# gradle/libs.versions.toml
[versions]
leakcanary = "2.14"
detekt = "1.23.8"

[libraries]
leakcanary-android = { module = "com.squareup.leakcanary:leakcanary-android", version.ref = "leakcanary" }
detekt-formatting = { module = "io.gitlab.arturbosch.detekt:detekt-formatting", version.ref = "detekt" }

[plugins]
detekt = { id = "io.gitlab.arturbosch.detekt", version.ref = "detekt" }
```

#### üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- **üéØ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** –≤–µ—Ä—Å–∏—è–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **üîÑ –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Å—Å—ã–ª–∫–∏** –Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- **üìä –õ–µ–≥–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –≤–µ—Ä—Å–∏–π
- **üõ°Ô∏è –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤** –≤–µ—Ä—Å–∏–π

### üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
./gradlew :composeApp:dependencies

# –ê–Ω–∞–ª–∏–∑ –≤—Ä–µ–º–µ–Ω–∏ —Å–±–æ—Ä–∫–∏
./gradlew build --profile

# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞
./gradlew build --parallel --build-cache

# –û—á–∏—Å—Ç–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
./gradlew clean
```

## üîÑ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π - KSP

### üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

**[KSP (Kotlin Symbol Processing)](https://github.com/google/ksp)** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π, –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏ –¥–ª—è Room database.

### ‚öôÔ∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```kotlin
// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è DAO –∏ Database –∫–ª–∞—Å—Å–æ–≤
@Database(entities = [PressureResultEntity::class], version = 1)
abstract class PressureResultsDatabase : RoomDatabase()

@Dao
interface PressureResultsDao {
    @Query("SELECT * FROM pressure_results")
    fun getAllResults(): Flow<List<PressureResultEntity>>
}
```

### üîß –ö–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è
./gradlew :core:database:kspKotlinMetadata

# –û—á–∏—Å—Ç–∫–∞ KSP –∫—ç—à–∞
./gradlew clean
```

## üåê –ü–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞ - expect/actual

### üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

**expect/actual** –º–µ—Ö–∞–Ω–∏–∑–º –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ Kotlin Multiplatform –ø—Ä–æ–µ–∫—Ç–∞—Ö.

### üì± –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### Database Factory

```kotlin
// commonMain
expect class DatabaseFactory {
    fun create(): PressureResultsDatabase
}

// androidMain  
actual class DatabaseFactory(private val context: Context) {
    actual fun create(): PressureResultsDatabase {
        return Room.databaseBuilder(context, PressureResultsDatabase::class.java, "pressure.db").build()
    }
}

// iosMain
actual class DatabaseFactory {
    actual fun create(): PressureResultsDatabase {
        // iOS specific implementation
    }
}
```

#### Settings Store

```kotlin
// commonMain
expect class SettingsStore<T> {
    suspend fun save(value: T)
    fun get(): Flow<T>
}

// androidMain - DataStore
// iosMain - UserDefaults  
// desktopMain - File system
```

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### ‚úÖ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **üîç –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ LeakCanary** - –∑–∞–ø—É—Å–∫–∞–π—Ç–µ debug —Å–±–æ—Ä–∫–∏ —á–∞—Å—Ç–æ
2. **üìä –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ Detekt –æ—Ç—á–µ—Ç—ã** - –∏—Å–ø—Ä–∞–≤–ª—è–π—Ç–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è —Å–≤–æ–µ–≤—Ä–µ–º–µ–Ω–Ω–æ
3. **‚ö° –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—É—é —Å–±–æ—Ä–∫—É** - —ç–∫–æ–Ω–æ–º—å—Ç–µ –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
4. **üîÑ –û–±–Ω–æ–≤–ª—è–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã** - —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –Ω–æ–≤—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏
5. **üìñ –ò–∑—É—á–∞–π—Ç–µ –æ—Ç—á–µ—Ç—ã** - –ø–æ–Ω–∏–º–∞–π—Ç–µ —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

- **LeakCanary** —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ debug —Å–±–æ—Ä–∫–∞—Ö
- **Detekt** –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∞–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- **KSP** —Ç—Ä–µ–±—É–µ—Ç —á–∏—Å—Ç–æ–π –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ö–µ–º—ã
- **Version Catalogs** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏

## üöÄ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å

### üìã –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
./gradlew --refresh-dependencies

# 2. –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
./gradlew detekt

# 3. –°–±–æ—Ä–∫–∞ debug –≤–µ—Ä—Å–∏–∏ —Å LeakCanary
./gradlew :composeApp:assembleDebug

# 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
./gradlew test

# 5. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞
./gradlew :composeApp:installDebug
```

### üîÑ –ü–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

```bash
# –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞
./gradlew clean detekt test build
```

### üì¶ –†–µ–ª–∏–∑

```bash
# –°–±–æ—Ä–∫–∞ production –≤–µ—Ä—Å–∏–∏ (–±–µ–∑ LeakCanary)
./gradlew :composeApp:assembleRelease
```

---

–≠—Ç–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞, —Ä–∞–Ω–Ω–µ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—É—é —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É BikeCalc Pro. –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –≤—Å–µ—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö.
