# üöÄ CI/CD Pipeline

![Pipeline Structure](../Pipeline_structure.png)

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **GitHub Actions** –¥–ª—è –ø–æ–ª–Ω–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–±–æ—Ä–∫–∏, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –¥–µ–ø–ª–æ—è –Ω–∞ –≤—Å–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–π–ø–ª–∞–π–Ω–∞

### üß™ Tests & Linting
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: ~3 –º–∏–Ω—É—Ç—ã
- **–ó–∞–¥–∞—á–∏**:
  - –ó–∞–ø—É—Å–∫ unit-—Ç–µ—Å—Ç–æ–≤ –º–æ–¥—É–ª–µ–π
  - –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ (Detekt)
  - –ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ç—á–µ—Ç–æ–≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### üèóÔ∏è Build Modules (Matrix)
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: ~2-3 –º–∏–Ω—É—Ç—ã (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)
- **–ú–æ–¥—É–ª–∏**:
  - `:core:model`, `:core:common`, `:core:database`
  - `:domain:pressure`, `:data:pressure`
  - `:designsystem`, `:feature:pressure`
- **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã**: –û—Ç—á–µ—Ç—ã —Å–±–æ—Ä–∫–∏ –º–æ–¥—É–ª–µ–π

### üì± Android Build
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: ~6 –º–∏–Ω—É—Ç
- **–ó–∞–¥–∞—á–∏**:
  - –°–±–æ—Ä–∫–∞ Debug APK
  - –°–±–æ—Ä–∫–∞ Release APK
- **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã**: APK —Ñ–∞–π–ª—ã (retention: 30 –¥–Ω–µ–π)

### üñ•Ô∏è Desktop Build (Matrix)
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: ~3-5 –º–∏–Ω—É—Ç
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º—ã**: Ubuntu, Windows, macOS
- **–ó–∞–¥–∞—á–∏**:
  - –°–æ–∑–¥–∞–Ω–∏–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
  - –£–ø–∞–∫–æ–≤–∫–∞ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–æ–≤
- **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã**: Desktop –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (retention: 7 –¥–Ω–µ–π)

### üçé iOS Build
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: ~3 –º–∏–Ω—É—Ç—ã
- **–ó–∞–¥–∞—á–∏**:
  - –ö–æ–º–ø–∏–ª—è—Ü–∏—è iOS ARM64 (—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
  - –ö–æ–º–ø–∏–ª—è—Ü–∏—è iOS x64 (—Å–∏–º—É–ª—è—Ç–æ—Ä)
- **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã**: –û—Ç—á–µ—Ç—ã –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ iOS

### üìä Architecture Analysis
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: ~4 –º–∏–Ω—É—Ç—ã
- **–ó–∞–¥–∞—á–∏**:
  - –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ –º–æ–¥—É–ª–µ–π
  - –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–±–æ—Ä–∫–∏
- **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã**: –û—Ç—á–µ—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### ‚úÖ Final Validation
- **–ó–∞–¥–∞—á–∏**:
  - –°–≤–æ–¥–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤—Å–µ—Ö jobs
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è CI Summary
  - –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤

## üì¶ –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∏ –æ—Ç—á–µ—Ç—ã

### üîç –ì–¥–µ –Ω–∞–π—Ç–∏ –æ—Ç—á–µ—Ç—ã

1. **GitHub Actions Summary**
   - –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª [Actions](https://github.com/filin2hat/BikeCalcMP/actions)
   - –í—ã–±–∏—Ä–∞–π—Ç–µ –Ω—É–∂–Ω—ã–π workflow run
   - –í–∫–ª–∞–¥–∫–∞ **Summary** —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–±—â—É—é —Å–≤–æ–¥–∫—É

2. **–°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤**
   - –í –∫–∞–∂–¥–æ–º workflow run –µ—Å—Ç—å —Ä–∞–∑–¥–µ–ª **Artifacts**
   - –î–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è:
     - `test-and-lint-reports` - –æ—Ç—á–µ—Ç—ã —Ç–µ—Å—Ç–æ–≤ –∏ –ª–∏–Ω—Ç–µ—Ä–∞
     - `reports-:module-name` - –æ—Ç—á–µ—Ç—ã —Å–±–æ—Ä–∫–∏ –º–æ–¥—É–ª–µ–π
     - `ci-summary` - –∏—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞ CI

3. **–¢–∏–ø—ã –æ—Ç—á–µ—Ç–æ–≤**
   - **Test Reports**: JUnit XML, –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
   - **Detekt Reports**: —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞
   - **Build Reports**: –ø—Ä–æ—Ñ–∏–ª–∏ —Å–±–æ—Ä–∫–∏, time analysis
   - **Dependency Reports**: –≥—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### üîß –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

1. **–ú–æ–¥—É–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞**
   ```yaml
   strategy:
     matrix:
       module: 
         - ":core:model"
         - ":core:common" 
         - ":core:database"
         # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏
   ```

2. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ Gradle**
   ```yaml
   - name: üêò Setup Gradle
     uses: gradle/gradle-build-action@v2
     with:
       gradle-home-cache-cleanup: true
   ```

3. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞**
   ```bash
   ./gradlew build --parallel --build-cache
   ```

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

| –≠—Ç–∞–ø | –í—Ä–µ–º—è | –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ |
|------|-------|-------------|
| Tests & Linting | ~3 –º–∏–Ω | 90% |
| Build Modules | ~3 –º–∏–Ω | 85% |
| Android Build | ~6 –º–∏–Ω | 80% |
| Desktop Build | ~5 –º–∏–Ω | 75% |
| iOS Compilation | ~3 –º–∏–Ω | 85% |

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º –ø—Ä–∏ –∫–∞–∂–¥–æ–º PR
- ‚úÖ **–†–∞–Ω–Ω–µ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ** –ø—Ä–æ–±–ª–µ–º —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã** –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–±–æ—Ä–∫–∏** –≥–æ—Ç–æ–≤—ã –∫ –¥–∏—Å—Ç—Ä–∏–±—É—Ü–∏–∏
- ‚úÖ **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±—ã—Å—Ç—Ä—É—é —Å–±–æ—Ä–∫—É
